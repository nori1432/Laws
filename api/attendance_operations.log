[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-24T03:18:07.207319+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-24T03:18:05.327577",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-24",
      "add_as_absent": false
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "auto_forced": true,
      "admin_override": true,
      "original_message": "Today is not the scheduled day for this class (scheduled for Saturday)",
      "message": "Time restrictions automatically bypassed for admin",
      "forced": true
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-09-24T03:18:05.887318",
      "attendance_date": "2025-09-24"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "note": "Payment status will be updated separately after attendance marking"
    },
    "database_commit_time": "2025-09-24T03:18:06.247958",
    "end_time": "2025-09-24T03:18:07.207319",
    "duration_seconds": 1.879742,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-24",
        "marked_by": 2,
        "marked_at": "2025-09-24T03:18:06.968890"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS"
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-24T03:18:34.021280+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-24T03:18:32.332336",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "absent",
      "course_type": "session",
      "date": "2025-09-24",
      "add_as_absent": false
    },
    "student_id": 1,
    "class_id": 14,
    "status": "absent",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "auto_forced": true,
      "admin_override": true,
      "original_message": "Today is not the scheduled day for this class (scheduled for Saturday)",
      "message": "Time restrictions automatically bypassed for admin",
      "forced": true
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-24",
      "original_marked_at": "2025-09-24T02:18:06"
    },
    "changes": {
      "status_changed": true,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "note": "Payment status will be updated separately after attendance marking"
    },
    "database_commit_time": "2025-09-24T03:18:33.005892",
    "end_time": "2025-09-24T03:18:34.021280",
    "duration_seconds": 1.688944,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "absent",
        "date": "2025-09-24",
        "marked_by": 2,
        "marked_at": "2025-09-24T03:18:33.798944"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS"
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-24T03:19:55.934464+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-24T03:19:54.258839",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-24",
      "add_as_absent": false
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "auto_forced": true,
      "admin_override": true,
      "original_message": "Today is not the scheduled day for this class (scheduled for Saturday)",
      "message": "Time restrictions automatically bypassed for admin",
      "forced": true
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "absent",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-24",
      "original_marked_at": "2025-09-24T02:18:06"
    },
    "changes": {
      "status_changed": true,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "note": "Payment status will be updated separately after attendance marking"
    },
    "database_commit_time": "2025-09-24T03:19:54.963638",
    "end_time": "2025-09-24T03:19:55.934464",
    "duration_seconds": 1.675625,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-24",
        "marked_by": 2,
        "marked_at": "2025-09-24T03:19:55.726014"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS"
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_ERROR: {
  "timestamp": "2025-09-24T03:34:19.720686+01:00",
  "operation_type": "MARK_ATTENDANCE_ERROR",
  "user_id": 2,
  "success": false,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-24T03:34:17.788840",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-24",
      "add_as_absent": false
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-24",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "auto_forced": true,
      "admin_override": true,
      "original_message": "Today is not the scheduled day for this class (scheduled for Saturday)",
      "message": "Time restrictions automatically bypassed for admin",
      "forced": true
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-24",
      "original_marked_at": "2025-09-24T02:18:06"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "note": "Payment status will be updated separately after attendance marking"
    },
    "database_commit_time": "2025-09-24T03:34:18.717639",
    "end_time": "2025-09-24T03:34:19.720164",
    "duration_seconds": 1.931846,
    "exception_type": "NameError",
    "exception_message": "name 'today' is not defined",
    "final_status": "ERROR"
  },
  "error": "name 'today' is not defined"
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-24T03:42:31.869667+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-24T03:42:30.394080",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-24",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-24",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-24",
      "original_marked_at": "2025-09-24T02:18:06"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "note": "Payment status will be updated separately after attendance marking"
    },
    "database_commit_time": "2025-09-24T03:42:30.922870",
    "end_time": "2025-09-24T03:42:31.869667",
    "duration_seconds": 1.475587,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-24",
        "marked_by": 2,
        "marked_at": "2025-09-24T03:42:31.630416"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS"
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-24T03:46:17.433427+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-24T03:46:15.914945",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-24",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-24",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-24",
      "original_marked_at": "2025-09-24T02:18:06"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "note": "Payment status will be updated separately after attendance marking"
    },
    "database_commit_time": "2025-09-24T03:46:16.430493",
    "end_time": "2025-09-24T03:46:17.433427",
    "duration_seconds": 1.518482,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-24",
        "marked_by": 2,
        "marked_at": "2025-09-24T03:46:17.184666"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS"
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-24T12:19:54.462419+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-24T12:19:52.272224",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-24",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-24",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-24",
      "original_marked_at": "2025-09-24T02:18:06"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "note": "Payment status will be updated separately after attendance marking"
    },
    "database_commit_time": "2025-09-24T12:19:52.885507",
    "end_time": "2025-09-24T12:19:54.462419",
    "duration_seconds": 2.190195,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-24",
        "marked_by": 2,
        "marked_at": "2025-09-24T12:19:54.186614"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS"
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-24T12:27:32.943877+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-24T12:27:31.645353",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-24",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-24",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-24",
      "original_marked_at": "2025-09-24T02:18:06"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "note": "Payment status will be updated separately after attendance marking"
    },
    "database_commit_time": "2025-09-24T12:27:32.115434",
    "end_time": "2025-09-24T12:27:32.943877",
    "duration_seconds": 1.298524,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-24",
        "marked_by": 2,
        "marked_at": "2025-09-24T12:27:32.748262"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS"
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-24T13:26:59.646331+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-24T13:26:55.861514",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-24",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-24",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-24",
      "original_marked_at": "2025-09-24T02:18:06"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "note": "Payment status will be updated separately after attendance marking"
    },
    "database_commit_time": "2025-09-24T13:26:57.727965",
    "end_time": "2025-09-24T13:26:59.646331",
    "duration_seconds": 3.784817,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-24",
        "marked_by": 2,
        "marked_at": "2025-09-24T13:26:59.452061"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS"
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_ERROR: {
  "timestamp": "2025-09-24T13:45:45.002405+01:00",
  "operation_type": "MARK_ATTENDANCE_ERROR",
  "user_id": 2,
  "success": false,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-24T13:45:44.303045",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-24",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-24",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-24",
      "original_marked_at": "2025-09-24T02:18:06"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "end_time": "2025-09-24T13:45:45.002405",
    "duration_seconds": 0.69936,
    "exception_type": "AttributeError",
    "exception_message": "'Student' object has no attribute 'total_debt'",
    "final_status": "ERROR"
  },
  "error": "'Student' object has no attribute 'total_debt'"
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-24T14:19:29.210230+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-24T14:19:27.550675",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-24",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-24",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-24",
      "original_marked_at": "2025-09-24T02:18:06"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 400.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-24T14:19:28.067441",
    "end_time": "2025-09-24T14:19:29.210230",
    "duration_seconds": 1.659555,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-24",
        "marked_by": 2,
        "marked_at": "2025-09-24T14:19:29.008928"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 400.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS"
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_ERROR: {
  "timestamp": "2025-09-25T03:30:31.221459+01:00",
  "operation_type": "MARK_ATTENDANCE_ERROR",
  "user_id": 2,
  "success": false,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T03:30:30.206326",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-09-25T03:30:30.728216",
      "attendance_date": "2025-09-25"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 400.0,
      "course_price": 400.0
    },
    "end_time": "2025-09-25T03:30:31.221459",
    "duration_seconds": 1.015133,
    "exception_type": "TypeError",
    "exception_message": "unsupported operand type(s) for +: 'decimal.Decimal' and 'float'",
    "final_status": "ERROR"
  },
  "error": "unsupported operand type(s) for +: 'decimal.Decimal' and 'float'"
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T03:42:45.991563+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T03:42:43.836622",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-25",
      "original_marked_at": "2025-09-25T02:38:40"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 800.0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 1200.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T03:42:44.553908",
    "end_time": "2025-09-25T03:42:45.991563",
    "duration_seconds": 2.154941,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T03:42:45.714487"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 1200.0,
        "debt_sessions": 3,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS"
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_ERROR: {
  "timestamp": "2025-09-25T04:08:20.500697+01:00",
  "operation_type": "MARK_ATTENDANCE_ERROR",
  "user_id": 2,
  "success": false,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T04:08:18.464217",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "paid",
      "original_date": "2025-09-25",
      "original_marked_at": "2025-09-25T02:38:40"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 800.0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 800.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T04:08:19.224661",
    "end_time": "2025-09-25T04:08:20.500697",
    "duration_seconds": 2.03648,
    "exception_type": "PendingRollbackError",
    "exception_message": "This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (pymysql.err.DataError) (1265, \"Data truncated for column 'type' at row 1\")\n[SQL: INSERT INTO notifications (user_id, title, message, type, is_read, created_at) VALUES (%(user_id)s, %(title)s, %(message)s, %(type)s, %(is_read)s, %(created_at)s)]\n[parameters: {'user_id': 1, 'title': '\u2705 Attendance Marked', 'message': 'You have been marked Present for Group1 by admin', 'type': 'attendance', 'is_read': 0, 'created_at': datetime.datetime(2025, 9, 25, 3, 8, 20, 106466)}]\n(Background on this error at: https://sqlalche.me/e/14/9h9h) (Background on this error at: https://sqlalche.me/e/14/7s2a)",
    "final_status": "ERROR"
  },
  "error": "This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (pymysql.err.DataError) (1265, \"Data truncated for column 'type' at row 1\")\n[SQL: INSERT INTO notifications (user_id, title, message, type, is_read, created_at) VALUES (%(user_id)s, %(title)s, %(message)s, %(type)s, %(is_read)s, %(created_at)s)]\n[parameters: {'user_id': 1, 'title': '\u2705 Attendance Marked', 'message': 'You have been marked Present for Group1 by admin', 'type': 'attendance', 'is_read': 0, 'created_at': datetime.datetime(2025, 9, 25, 3, 8, 20, 106466)}]\n(Background on this error at: https://sqlalche.me/e/14/9h9h) (Background on this error at: https://sqlalche.me/e/14/7s2a)"
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T04:16:08.947984+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T04:16:04.741341",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "paid",
      "original_date": "2025-09-25",
      "original_marked_at": "2025-09-25T02:38:40"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 800.0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 800.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T04:16:05.464980",
    "push_notification": {
      "sent": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "end_time": "2025-09-25T04:16:08.946973",
    "duration_seconds": 4.205632,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T04:16:07.509637"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 800.0,
        "debt_sessions": 2,
        "payment_status": "paid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS"
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T04:38:27.334996+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T04:38:20.454453",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "paid",
      "original_date": "2025-09-25",
      "original_marked_at": "2025-09-25T02:38:40"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 400.0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 400.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T04:38:21.196113",
    "push_notification": {
      "sent": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "end_time": "2025-09-25T04:38:26.739057",
    "duration_seconds": 6.284604,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T04:38:25.334657"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 400.0,
        "debt_sessions": 1,
        "payment_status": "paid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T04:38:27.373949+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T04:38:20.454453",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "paid",
      "original_date": "2025-09-25",
      "original_marked_at": "2025-09-25T02:38:40"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 400.0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 400.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T04:38:21.196113",
    "push_notification": {
      "sent": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "end_time": "2025-09-25T04:38:26.739057",
    "duration_seconds": 6.284604,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T04:38:25.334657"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 400.0,
        "debt_sessions": 1,
        "payment_status": "paid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T04:49:05.021660+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T04:48:57.379841",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 8,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 8,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u0623\u0648\u0644\u0649 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0631\u064a\u0627\u0636\u064a\u0627\u062a",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "TBD",
      "end_time": "TBD",
      "day": "TBD"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-09-25T04:49:00.094794",
      "attendance_date": "2025-09-25"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 400.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T04:49:00.389936",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u0623\u0648\u0644\u0649 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0631\u064a\u0627\u0636\u064a\u0627\u062a has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u0623\u0648\u0644\u0649 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0631\u064a\u0627\u0636\u064a\u0627\u062a has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-25T04:49:04.458218",
    "duration_seconds": 7.078377,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 8,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T04:49:02.980407"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 400.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T04:49:05.042896+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T04:48:57.379841",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 8,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 8,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u0623\u0648\u0644\u0649 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0631\u064a\u0627\u0636\u064a\u0627\u062a",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "TBD",
      "end_time": "TBD",
      "day": "TBD"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-09-25T04:49:00.094794",
      "attendance_date": "2025-09-25"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 400.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T04:49:00.389936",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u0623\u0648\u0644\u0649 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0631\u064a\u0627\u0636\u064a\u0627\u062a has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u0623\u0648\u0644\u0649 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0631\u064a\u0627\u0636\u064a\u0627\u062a has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-25T04:49:04.458218",
    "duration_seconds": 7.078377,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 8,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T04:49:02.980407"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 400.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T04:50:10.932793+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T04:50:05.782738",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "paid",
      "original_date": "2025-09-25",
      "original_marked_at": "2025-09-25T02:38:40"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T04:50:06.506913",
    "push_notification": {
      "sent": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "end_time": "2025-09-25T04:50:10.416689",
    "duration_seconds": 4.633951,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T04:50:08.931520"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "paid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T04:50:10.941794+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T04:50:05.782738",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "paid",
      "original_date": "2025-09-25",
      "original_marked_at": "2025-09-25T02:38:40"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T04:50:06.506913",
    "push_notification": {
      "sent": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "end_time": "2025-09-25T04:50:10.416689",
    "duration_seconds": 4.633951,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T04:50:08.931520"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "paid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T04:56:14.460468+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T04:56:09.334752",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "paid",
      "original_date": "2025-09-25",
      "original_marked_at": "2025-09-25T02:38:40"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T04:56:10.087992",
    "push_notification": {
      "sent": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "end_time": "2025-09-25T04:56:13.933528",
    "duration_seconds": 4.598776,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T04:56:12.353802"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "paid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T04:56:14.465458+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T04:56:09.334752",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "paid",
      "original_date": "2025-09-25",
      "original_marked_at": "2025-09-25T02:38:40"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T04:56:10.087992",
    "push_notification": {
      "sent": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "end_time": "2025-09-25T04:56:13.933528",
    "duration_seconds": 4.598776,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T04:56:12.353802"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "paid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T05:03:29.167809+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T05:03:22.295786",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "paid",
      "original_date": "2025-09-25",
      "original_marked_at": "2025-09-25T02:38:40"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T05:03:23.053556",
    "push_notification": {
      "sent": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "end_time": "2025-09-25T05:03:28.527708",
    "duration_seconds": 6.231922,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T05:03:27.056703"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "paid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T05:03:29.174803+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T05:03:22.295786",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "paid",
      "original_date": "2025-09-25",
      "original_marked_at": "2025-09-25T02:38:40"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T05:03:23.053556",
    "push_notification": {
      "sent": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "end_time": "2025-09-25T05:03:28.527708",
    "duration_seconds": 6.231922,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T05:03:27.056703"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "paid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T13:03:16.367200+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T13:03:11.964637",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "paid",
      "original_date": "2025-09-25",
      "original_marked_at": "2025-09-25T02:38:40"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T13:03:12.519858",
    "push_notification": {
      "sent": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "end_time": "2025-09-25T13:03:15.807627",
    "duration_seconds": 3.84299,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T13:03:14.652584"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "paid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-25T13:03:16.373831+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-25T13:03:11.964637",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-25",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "paid",
      "original_date": "2025-09-25",
      "original_marked_at": "2025-09-25T02:38:40"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-25T13:03:12.519858",
    "push_notification": {
      "sent": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Confirmed",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present and payment confirmed.",
      "type": "attendance"
    },
    "end_time": "2025-09-25T13:03:15.807627",
    "duration_seconds": 3.84299,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-25",
        "marked_by": 2,
        "marked_at": "2025-09-25T13:03:14.652584"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 0,
        "debt_sessions": 0,
        "payment_status": "paid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T00:44:30.448510+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T00:44:25.986506",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-09-26T00:44:26.482083",
      "attendance_date": "2025-09-26"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 400.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-26T00:44:26.656854",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T00:44:29.848183",
    "duration_seconds": 3.861677,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T00:44:28.685401"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 400.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T00:44:30.454324+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T00:44:25.986506",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-25",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-09-26T00:44:26.482083",
      "attendance_date": "2025-09-26"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 400.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-26T00:44:26.656854",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T00:44:29.848183",
    "duration_seconds": 3.861677,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T00:44:28.685401"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 400.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T02:11:05.115932+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T02:11:00.928540",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1001,
      "class_id": 66,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1001,
    "class_id": 66,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "WISSAM HAMMOUM",
    "class_name": "MESSAOUDI",
    "course_name": "\u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "TBD",
      "end_time": "TBD",
      "day": "TBD"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-09-26T02:11:01.766694",
      "attendance_date": "2025-09-26"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 1500.0,
      "total_debt": 1500.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-26T02:11:01.962188",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T02:11:04.442010",
    "duration_seconds": 3.51347,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1001,
        "class_id": 66,
        "status": "present",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T02:11:03.231773"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 1500.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 1500.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T02:11:05.119933+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T02:11:00.928540",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1001,
      "class_id": 66,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1001,
    "class_id": 66,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "WISSAM HAMMOUM",
    "class_name": "MESSAOUDI",
    "course_name": "\u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "TBD",
      "end_time": "TBD",
      "day": "TBD"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-09-26T02:11:01.766694",
      "attendance_date": "2025-09-26"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 1500.0,
      "total_debt": 1500.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-26T02:11:01.962188",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T02:11:04.442010",
    "duration_seconds": 3.51347,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1001,
        "class_id": 66,
        "status": "present",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T02:11:03.231773"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 1500.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 1500.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T02:11:25.415264+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T02:11:21.863227",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1001,
      "class_id": 66,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1001,
    "class_id": 66,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "WISSAM HAMMOUM",
    "class_name": "MESSAOUDI",
    "course_name": "\u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "TBD",
      "end_time": "TBD",
      "day": "TBD"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-26",
      "original_marked_at": "2025-09-26T01:11:02"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 1500.0,
      "course_price": 1500.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 1500.0,
      "total_debt": 1500.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-26T02:11:22.415259",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T02:11:24.518388",
    "duration_seconds": 2.655161,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1001,
        "class_id": 66,
        "status": "present",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T02:11:23.429478"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 1500.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 1500.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T02:11:25.420261+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T02:11:21.863227",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1001,
      "class_id": 66,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1001,
    "class_id": 66,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "WISSAM HAMMOUM",
    "class_name": "MESSAOUDI",
    "course_name": "\u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "TBD",
      "end_time": "TBD",
      "day": "TBD"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-26",
      "original_marked_at": "2025-09-26T01:11:02"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 1500.0,
      "course_price": 1500.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 1500.0,
      "total_debt": 1500.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-26T02:11:22.415259",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T02:11:24.518388",
    "duration_seconds": 2.655161,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1001,
        "class_id": 66,
        "status": "present",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T02:11:23.429478"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 1500.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 1500.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T03:35:54.812692+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T03:35:51.766322",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1001,
      "class_id": 66,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1001,
    "class_id": 66,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "WISSAM HAMMOUM",
    "class_name": "MESSAOUDI",
    "course_name": "\u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "14:00",
      "end_time": "17:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-26",
      "original_marked_at": "2025-09-26T01:11:02"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 1500.0,
      "course_price": 1500.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 1500.0,
      "total_debt": 1500.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-26T03:35:52.253880",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T03:35:54.204813",
    "duration_seconds": 2.438491,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1001,
        "class_id": 66,
        "status": "present",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T03:35:53.164925"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 1500.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 1500.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T03:35:54.817691+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T03:35:51.766322",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1001,
      "class_id": 66,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1001,
    "class_id": 66,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "WISSAM HAMMOUM",
    "class_name": "MESSAOUDI",
    "course_name": "\u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "14:00",
      "end_time": "17:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-26",
      "original_marked_at": "2025-09-26T01:11:02"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 1500.0,
      "course_price": 1500.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 1500.0,
      "total_debt": 1500.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-26T03:35:52.253880",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T03:35:54.204813",
    "duration_seconds": 2.438491,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1001,
        "class_id": 66,
        "status": "present",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T03:35:53.164925"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 1500.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 1500.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T04:17:30.663946+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T04:17:27.166646",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1001,
      "class_id": 66,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1001,
    "class_id": 66,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "WISSAM HAMMOUM",
    "class_name": "MESSAOUDI",
    "course_name": "\u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "14:00",
      "end_time": "17:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-26",
      "original_marked_at": "2025-09-26T01:11:02"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 1500.0,
      "course_price": 1500.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 1500.0,
      "total_debt": 1500.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-26T04:17:27.848285",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T04:17:30.016300",
    "duration_seconds": 2.849654,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1001,
        "class_id": 66,
        "status": "present",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T04:17:28.885278"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 1500.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 1500.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T04:17:30.671947+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T04:17:27.166646",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1001,
      "class_id": 66,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1001,
    "class_id": 66,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "WISSAM HAMMOUM",
    "class_name": "MESSAOUDI",
    "course_name": "\u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "14:00",
      "end_time": "17:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-26",
      "original_marked_at": "2025-09-26T01:11:02"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 1500.0,
      "course_price": 1500.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 1500.0,
      "total_debt": 1500.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-26T04:17:27.848285",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T04:17:30.016300",
    "duration_seconds": 2.849654,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1001,
        "class_id": 66,
        "status": "present",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T04:17:28.885278"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 1500.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 1500.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T04:44:14.833529+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T04:44:10.155112",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 71,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 71,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0634\u0639\u0628\u0629 \u0644\u063a\u0627\u062a - \u0627\u0633\u0628\u0627\u0646\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "TBD",
      "end_time": "TBD",
      "day": "TBD"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-09-26T04:44:11.178425",
      "attendance_date": "2025-09-26"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "old_count": 0,
        "new_count": 1,
        "status_counted": "present",
        "reason": "new_attendance"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-09-26T04:44:11.348488",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0634\u0639\u0628\u0629 \u0644\u063a\u0627\u062a - \u0627\u0633\u0628\u0627\u0646\u064a\u0629 has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0634\u0639\u0628\u0629 \u0644\u063a\u0627\u062a - \u0627\u0633\u0628\u0627\u0646\u064a\u0629 has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T04:44:14.225697",
    "duration_seconds": 4.070585,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 71,
        "status": "present",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T04:44:13.167084"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T04:44:14.847526+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T04:44:10.155112",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 71,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 71,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0634\u0639\u0628\u0629 \u0644\u063a\u0627\u062a - \u0627\u0633\u0628\u0627\u0646\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "TBD",
      "end_time": "TBD",
      "day": "TBD"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-09-26T04:44:11.178425",
      "attendance_date": "2025-09-26"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "old_count": 0,
        "new_count": 1,
        "status_counted": "present",
        "reason": "new_attendance"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-09-26T04:44:11.348488",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0634\u0639\u0628\u0629 \u0644\u063a\u0627\u062a - \u0627\u0633\u0628\u0627\u0646\u064a\u0629 has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0634\u0639\u0628\u0629 \u0644\u063a\u0627\u062a - \u0627\u0633\u0628\u0627\u0646\u064a\u0629 has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T04:44:14.225697",
    "duration_seconds": 4.070585,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 71,
        "status": "present",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T04:44:13.167084"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T04:45:31.238372+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T04:45:27.862437",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1001,
      "class_id": 66,
      "status": "absent",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": true,
      "force": true
    },
    "student_id": 1001,
    "class_id": 66,
    "status": "absent",
    "add_as_absent": true,
    "force_attendance": true,
    "student_name": "WISSAM HAMMOUM",
    "class_name": "MESSAOUDI",
    "course_name": "\u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "14:00",
      "end_time": "17:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-26",
      "original_marked_at": "2025-09-26T01:11:02"
    },
    "changes": {
      "status_changed": true,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 1500.0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 0,
        "status": "absent",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 0,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-09-26T04:45:28.463226",
    "push_notification": {
      "sent": true,
      "title": "Absence Recorded",
      "message": "Your absence for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been recorded.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Absence Recorded",
      "message": "Your absence for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been recorded.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T04:45:30.509878",
    "duration_seconds": 2.647441,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1001,
        "class_id": 66,
        "status": "absent",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T04:45:29.552403"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 1500.0,
        "debt_sessions": 1,
        "monthly_sessions_attended": 0,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 0,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 0
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-26T04:45:31.284787+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T04:45:27.862437",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1001,
      "class_id": 66,
      "status": "absent",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": true,
      "force": true
    },
    "student_id": 1001,
    "class_id": 66,
    "status": "absent",
    "add_as_absent": true,
    "force_attendance": true,
    "student_name": "WISSAM HAMMOUM",
    "class_name": "MESSAOUDI",
    "course_name": "\u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "14:00",
      "end_time": "17:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-26",
      "original_marked_at": "2025-09-26T01:11:02"
    },
    "changes": {
      "status_changed": true,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 1500.0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 0,
        "status": "absent",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 0,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-09-26T04:45:28.463226",
    "push_notification": {
      "sent": true,
      "title": "Absence Recorded",
      "message": "Your absence for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been recorded.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Absence Recorded",
      "message": "Your absence for \u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0639\u0628 - \u0641\u064a\u0632\u064a\u0627\u0621 has been recorded.",
      "type": "attendance"
    },
    "end_time": "2025-09-26T04:45:30.509878",
    "duration_seconds": 2.647441,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1001,
        "class_id": 66,
        "status": "absent",
        "date": "2025-09-26",
        "marked_by": 2,
        "marked_at": "2025-09-26T04:45:29.552403"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 1500.0,
        "debt_sessions": 1,
        "monthly_sessions_attended": 0,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 0,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 0
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_ERROR: {
  "timestamp": "2025-09-26T04:46:10.298937+01:00",
  "operation_type": "MARK_ATTENDANCE_ERROR",
  "user_id": 2,
  "success": false,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T04:46:07.940527",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1001,
      "class_id": 75,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1001,
    "class_id": 75,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "WISSAM HAMMOUM",
    "class_name": "Group2",
    "course_name": "\u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "08:00",
      "end_time": "12:00",
      "day": "Friday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-09-26T04:46:08.425530",
      "attendance_date": "2025-09-26"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 3,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "old_count": 3,
        "new_count": 4,
        "status_counted": "present",
        "reason": "new_attendance"
      },
      "cycle_info": {
        "cycle_complete": true,
        "payment_due": true,
        "payment_required": true,
        "sessions_in_cycle": 4,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-09-26T04:46:08.594846",
    "end_time": "2025-09-26T04:46:10.298937",
    "duration_seconds": 2.35841,
    "exception_type": "PendingRollbackError",
    "exception_message": "This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (pymysql.err.DataError) (1265, \"Data truncated for column 'type' at row 1\")\n[SQL: INSERT INTO notifications (user_id, title_en, title_ar, message_en, message_ar, title, message, type, is_read, created_at) VALUES (%(user_id)s, %(title_en)s, %(title_ar)s, %(message_en)s, %(message_ar)s, %(title)s, %(message)s, %(type)s, %(is_read)s, %(created_at)s)]\n[parameters: {'user_id': 1001, 'title_en': '\ud83d\udcb3 Payment Due', 'title_ar': '\ud83d\udcb3 Payment Due', 'message_en': \"Your monthly payment is due for \u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645. You've completed 4 sessions.\", 'message_ar': \"Your monthly payment is due \u0641\u064a \u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645. You've completed 4 sessions.\", 'title': '\ud83d\udcb3 Payment Due', 'message': \"Your monthly payment is due for \u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645. You've completed 4 sessions.\", 'type': 'payment_due', 'is_read': 0, 'created_at': datetime.datetime(2025, 9, 26, 3, 46, 10, 32168)}]\n(Background on this error at: https://sqlalche.me/e/14/9h9h) (Background on this error at: https://sqlalche.me/e/14/7s2a)",
    "final_status": "ERROR"
  },
  "error": "This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (pymysql.err.DataError) (1265, \"Data truncated for column 'type' at row 1\")\n[SQL: INSERT INTO notifications (user_id, title_en, title_ar, message_en, message_ar, title, message, type, is_read, created_at) VALUES (%(user_id)s, %(title_en)s, %(title_ar)s, %(message_en)s, %(message_ar)s, %(title)s, %(message)s, %(type)s, %(is_read)s, %(created_at)s)]\n[parameters: {'user_id': 1001, 'title_en': '\ud83d\udcb3 Payment Due', 'title_ar': '\ud83d\udcb3 Payment Due', 'message_en': \"Your monthly payment is due for \u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645. You've completed 4 sessions.\", 'message_ar': \"Your monthly payment is due \u0641\u064a \u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645. You've completed 4 sessions.\", 'title': '\ud83d\udcb3 Payment Due', 'message': \"Your monthly payment is due for \u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645. You've completed 4 sessions.\", 'type': 'payment_due', 'is_read': 0, 'created_at': datetime.datetime(2025, 9, 26, 3, 46, 10, 32168)}]\n(Background on this error at: https://sqlalche.me/e/14/9h9h) (Background on this error at: https://sqlalche.me/e/14/7s2a)"
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_ERROR: {
  "timestamp": "2025-09-26T05:03:01.645151+01:00",
  "operation_type": "MARK_ATTENDANCE_ERROR",
  "user_id": 2,
  "success": false,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-26T05:02:59.451126",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1001,
      "class_id": 75,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-09-26",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1001,
    "class_id": 75,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "WISSAM HAMMOUM",
    "class_name": "Group2",
    "course_name": "\u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645",
    "course_type": "session",
    "attendance_date": "2025-09-26",
    "class_schedule": {
      "start_time": "08:00",
      "end_time": "12:00",
      "day": "Friday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-09-26",
      "original_marked_at": "2025-09-26T03:46:08"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 4,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 4,
        "status": "present",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": true,
        "payment_due": true,
        "payment_required": true,
        "sessions_in_cycle": 4,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-09-26T05:03:00.012841",
    "end_time": "2025-09-26T05:03:01.645151",
    "duration_seconds": 2.194025,
    "exception_type": "PendingRollbackError",
    "exception_message": "This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (pymysql.err.DataError) (1265, \"Data truncated for column 'type' at row 1\")\n[SQL: INSERT INTO notifications (user_id, title_en, title_ar, message_en, message_ar, title, message, type, is_read, created_at) VALUES (%(user_id)s, %(title_en)s, %(title_ar)s, %(message_en)s, %(message_ar)s, %(title)s, %(message)s, %(type)s, %(is_read)s, %(created_at)s)]\n[parameters: {'user_id': 1001, 'title_en': '\ud83d\udcb3 Payment Due', 'title_ar': '\ud83d\udcb3 Payment Due', 'message_en': \"Your monthly payment is due for \u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645. You've completed 4 sessions.\", 'message_ar': \"Your monthly payment is due \u0641\u064a \u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645. You've completed 4 sessions.\", 'title': '\ud83d\udcb3 Payment Due', 'message': \"Your monthly payment is due for \u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645. You've completed 4 sessions.\", 'type': 'payment_due', 'is_read': 0, 'created_at': datetime.datetime(2025, 9, 26, 4, 3, 1, 409921)}]\n(Background on this error at: https://sqlalche.me/e/14/9h9h) (Background on this error at: https://sqlalche.me/e/14/7s2a)",
    "final_status": "ERROR"
  },
  "error": "This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (pymysql.err.DataError) (1265, \"Data truncated for column 'type' at row 1\")\n[SQL: INSERT INTO notifications (user_id, title_en, title_ar, message_en, message_ar, title, message, type, is_read, created_at) VALUES (%(user_id)s, %(title_en)s, %(title_ar)s, %(message_en)s, %(message_ar)s, %(title)s, %(message)s, %(type)s, %(is_read)s, %(created_at)s)]\n[parameters: {'user_id': 1001, 'title_en': '\ud83d\udcb3 Payment Due', 'title_ar': '\ud83d\udcb3 Payment Due', 'message_en': \"Your monthly payment is due for \u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645. You've completed 4 sessions.\", 'message_ar': \"Your monthly payment is due \u0641\u064a \u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645. You've completed 4 sessions.\", 'title': '\ud83d\udcb3 Payment Due', 'message': \"Your monthly payment is due for \u0634\u0639\u0628\u0629 \u0639\u0644\u0648\u0645 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 - \u0639\u0644\u0648\u0645. You've completed 4 sessions.\", 'type': 'payment_due', 'is_read': 0, 'created_at': datetime.datetime(2025, 9, 26, 4, 3, 1, 409921)}]\n(Background on this error at: https://sqlalche.me/e/14/9h9h) (Background on this error at: https://sqlalche.me/e/14/7s2a)"
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-28T21:58:42.831069+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-28T21:58:36.404660",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-28",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-28",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-09-28T21:58:36.955428",
      "attendance_date": "2025-09-28"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 400.0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 800.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-28T21:58:37.217973",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-28T21:58:41.233931",
    "duration_seconds": 4.829271,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-28",
        "marked_by": 2,
        "marked_at": "2025-09-28T21:58:39.962585"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 800.0,
        "debt_sessions": 2,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-09-28T21:58:42.831069+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-09-28T21:58:36.404660",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-09-28",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-09-28",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-09-28T21:58:36.955428",
      "attendance_date": "2025-09-28"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 400.0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 800.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-09-28T21:58:37.217973",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-09-28T21:58:41.233931",
    "duration_seconds": 4.829271,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-09-28",
        "marked_by": 2,
        "marked_at": "2025-09-28T21:58:39.962585"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 800.0,
        "debt_sessions": 2,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T20:32:50.019739+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T20:32:36.287474",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 81,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1208,
    "class_id": 81,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group C",
    "course_name": "BAC - Philosophie Moderne",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "20:32",
      "check_performed_at": "2025-10-01T20:32:38.069137"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-01T20:32:38.254476",
      "attendance_date": "2025-10-01"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "old_count": 0,
        "new_count": 1,
        "status_counted": "present",
        "reason": "new_attendance"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T20:32:38.575315",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T20:32:44.121092",
    "duration_seconds": 7.833618,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 81,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T20:32:40.250886"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T20:32:50.023740+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T20:32:36.287474",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 81,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1208,
    "class_id": 81,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group C",
    "course_name": "BAC - Philosophie Moderne",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "20:32",
      "check_performed_at": "2025-10-01T20:32:38.069137"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-01T20:32:38.254476",
      "attendance_date": "2025-10-01"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "old_count": 0,
        "new_count": 1,
        "status_counted": "present",
        "reason": "new_attendance"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T20:32:38.575315",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T20:32:44.121092",
    "duration_seconds": 7.833618,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 81,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T20:32:40.250886"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T20:57:45.724679+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T20:57:40.904587",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 81,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1208,
    "class_id": 81,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group C",
    "course_name": "BAC - Philosophie Moderne",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "20:57",
      "check_performed_at": "2025-10-01T20:57:41.553991"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-01T20:57:41.832916",
      "attendance_date": "2025-10-01"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 1,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "old_count": 1,
        "new_count": 2,
        "status_counted": "present",
        "reason": "new_attendance"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 2,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T20:57:42.048475",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T20:57:44.327043",
    "duration_seconds": 3.422456,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 81,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T20:57:43.304043"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 2,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 2,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 2
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T20:57:45.728676+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T20:57:40.904587",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 81,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1208,
    "class_id": 81,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group C",
    "course_name": "BAC - Philosophie Moderne",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "20:57",
      "check_performed_at": "2025-10-01T20:57:41.553991"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-01T20:57:41.832916",
      "attendance_date": "2025-10-01"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 1,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "old_count": 1,
        "new_count": 2,
        "status_counted": "present",
        "reason": "new_attendance"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 2,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T20:57:42.048475",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T20:57:44.327043",
    "duration_seconds": 3.422456,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 81,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T20:57:43.304043"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 2,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 2,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 2
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T20:59:23.481862+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T20:59:06.444796",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 79,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1208,
    "class_id": 79,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group A",
    "course_name": "BAC - Analyse Litt\u00e9raire",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Monday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-01T20:59:07.767145",
      "attendance_date": "2025-10-01"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "old_count": 0,
        "new_count": 1,
        "status_counted": "present",
        "reason": "new_attendance"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T20:59:08.128949",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T20:59:19.266788",
    "duration_seconds": 12.821992,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 79,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T20:59:12.154978"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T20:59:23.483862+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T20:59:06.444796",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 79,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1208,
    "class_id": 79,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group A",
    "course_name": "BAC - Analyse Litt\u00e9raire",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Monday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-01T20:59:07.767145",
      "attendance_date": "2025-10-01"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "old_count": 0,
        "new_count": 1,
        "status_counted": "present",
        "reason": "new_attendance"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T20:59:08.128949",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T20:59:19.266788",
    "duration_seconds": 12.821992,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 79,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T20:59:12.154978"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T20:59:44.841969+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T20:59:24.991133",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 79,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1208,
    "class_id": 79,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group A",
    "course_name": "BAC - Analyse Litt\u00e9raire",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Monday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-10-01",
      "original_marked_at": "2025-10-01T19:59:08"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 1,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 1,
        "status": "present",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T20:59:28.562577",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T20:59:36.373551",
    "duration_seconds": 11.382418,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 79,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T20:59:33.033332"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T20:59:44.844971+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T20:59:24.991133",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 79,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1208,
    "class_id": 79,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group A",
    "course_name": "BAC - Analyse Litt\u00e9raire",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Monday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-10-01",
      "original_marked_at": "2025-10-01T19:59:08"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 1,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 1,
        "status": "present",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T20:59:28.562577",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T20:59:36.373551",
    "duration_seconds": 11.382418,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 79,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T20:59:33.033332"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:00:51.794980+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:00:31.707143",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1207,
      "class_id": 81,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1207,
    "class_id": 81,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Lina Haddad",
    "class_name": "Group C",
    "course_name": "BAC - Philosophie Moderne",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "21:00",
      "check_performed_at": "2025-10-01T21:00:36.015175"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-01T21:00:36.286170",
      "attendance_date": "2025-10-01"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "old_count": 0,
        "new_count": 1,
        "status_counted": "present",
        "reason": "new_attendance"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:00:37.147990",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:00:47.408625",
    "duration_seconds": 15.701482,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1207,
        "class_id": 81,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:00:41.150886"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:00:51.796980+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:00:31.707143",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1207,
      "class_id": 81,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1207,
    "class_id": 81,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Lina Haddad",
    "class_name": "Group C",
    "course_name": "BAC - Philosophie Moderne",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "21:00",
      "check_performed_at": "2025-10-01T21:00:36.015175"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-01T21:00:36.286170",
      "attendance_date": "2025-10-01"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "old_count": 0,
        "new_count": 1,
        "status_counted": "present",
        "reason": "new_attendance"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:00:37.147990",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:00:47.408625",
    "duration_seconds": 15.701482,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1207,
        "class_id": 81,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:00:41.150886"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:10:24.405132+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:10:11.555764",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 79,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1208,
    "class_id": 79,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group A",
    "course_name": "BAC - Analyse Litt\u00e9raire",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Monday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-10-01",
      "original_marked_at": "2025-10-01T19:59:08"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 1,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 1,
        "status": "present",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:10:13.950778",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:10:21.336848",
    "duration_seconds": 9.781084,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 79,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:10:18.687593"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:10:24.409132+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:10:11.555764",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 79,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1208,
    "class_id": 79,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group A",
    "course_name": "BAC - Analyse Litt\u00e9raire",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Monday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-10-01",
      "original_marked_at": "2025-10-01T19:59:08"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 1,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 1,
        "status": "present",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:10:13.950778",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:10:21.336848",
    "duration_seconds": 9.781084,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 79,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:10:18.687593"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:11:53.280450+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:11:44.829886",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 81,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1208,
    "class_id": 81,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group C",
    "course_name": "BAC - Philosophie Moderne",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "21:11",
      "check_performed_at": "2025-10-01T21:11:46.134784"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-10-01",
      "original_marked_at": "2025-10-01T19:57:42"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 2,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 2,
        "status": "present",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 2,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:11:46.596661",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:11:51.855341",
    "duration_seconds": 7.025455,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 81,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:11:50.332404"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 2,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 2,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 2
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:11:53.284933+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:11:44.829886",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 81,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1208,
    "class_id": 81,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group C",
    "course_name": "BAC - Philosophie Moderne",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "21:11",
      "check_performed_at": "2025-10-01T21:11:46.134784"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-10-01",
      "original_marked_at": "2025-10-01T19:57:42"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 2,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 2,
        "status": "present",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 2,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:11:46.596661",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:11:51.855341",
    "duration_seconds": 7.025455,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 81,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:11:50.332404"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 2,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 2,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 2
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:12:15.889563+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:12:10.954382",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 81,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1208,
    "class_id": 81,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group C",
    "course_name": "BAC - Philosophie Moderne",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "21:12",
      "check_performed_at": "2025-10-01T21:12:11.538985"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-10-01",
      "original_marked_at": "2025-10-01T19:57:42"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 2,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 2,
        "status": "present",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 2,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:12:11.762569",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:12:14.498775",
    "duration_seconds": 3.544393,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 81,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:12:13.296492"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 2,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 2,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 2
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:12:15.893564+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:12:10.954382",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 81,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1208,
    "class_id": 81,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group C",
    "course_name": "BAC - Philosophie Moderne",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "21:12",
      "check_performed_at": "2025-10-01T21:12:11.538985"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-10-01",
      "original_marked_at": "2025-10-01T19:57:42"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 2,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 2,
        "status": "present",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 2,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:12:11.762569",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:12:14.498775",
    "duration_seconds": 3.544393,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 81,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:12:13.296492"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 2,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 2,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 2
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:23:11.023056+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:23:03.311587",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 81,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1208,
    "class_id": 81,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group C",
    "course_name": "BAC - Philosophie Moderne",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "21:23",
      "check_performed_at": "2025-10-01T21:23:04.032693"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-10-01",
      "original_marked_at": "2025-10-01T19:57:42"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 2,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 2,
        "status": "present",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 2,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:23:04.449313",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:23:09.791789",
    "duration_seconds": 6.480202,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 81,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:23:07.323759"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 2,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 2,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 2
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:23:11.027056+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:23:03.311587",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 81,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1208,
    "class_id": 81,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group C",
    "course_name": "BAC - Philosophie Moderne",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "21:23",
      "check_performed_at": "2025-10-01T21:23:04.032693"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-10-01",
      "original_marked_at": "2025-10-01T19:57:42"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 2,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 2,
        "status": "present",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 2,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:23:04.449313",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Philosophie Moderne has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:23:09.791789",
    "duration_seconds": 6.480202,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 81,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:23:07.323759"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 2,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 2,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 2
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:23:49.113391+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:23:40.734512",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1206,
      "class_id": 80,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1206,
    "class_id": 80,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Karim Belkacem",
    "class_name": "Group B",
    "course_name": "BAC - Calcul Avanc\u00e9",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "21:23",
      "check_performed_at": "2025-10-01T21:23:41.526823"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-01T21:23:41.790550",
      "attendance_date": "2025-10-01"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "old_count": 0,
        "new_count": 1,
        "status_counted": "present",
        "reason": "new_attendance"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:23:42.295080",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Calcul Avanc\u00e9 has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Calcul Avanc\u00e9 has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:23:46.545752",
    "duration_seconds": 5.81124,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1206,
        "class_id": 80,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:23:44.556834"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:23:49.115394+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:23:40.734512",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1206,
      "class_id": 80,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": false
    },
    "student_id": 1206,
    "class_id": 80,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Karim Belkacem",
    "class_name": "Group B",
    "course_name": "BAC - Calcul Avanc\u00e9",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Wednesday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "21:23",
      "check_performed_at": "2025-10-01T21:23:41.526823"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-01T21:23:41.790550",
      "attendance_date": "2025-10-01"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "old_count": 0,
        "new_count": 1,
        "status_counted": "present",
        "reason": "new_attendance"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:23:42.295080",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Calcul Avanc\u00e9 has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Calcul Avanc\u00e9 has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:23:46.545752",
    "duration_seconds": 5.81124,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1206,
        "class_id": 80,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:23:44.556834"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:25:14.219672+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:25:09.976823",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 79,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1208,
    "class_id": 79,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group A",
    "course_name": "BAC - Analyse Litt\u00e9raire",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Monday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-10-01",
      "original_marked_at": "2025-10-01T19:59:08"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 1,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 1,
        "status": "present",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:25:10.540587",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:25:13.062398",
    "duration_seconds": 3.085575,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 79,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:25:11.836799"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-01T21:25:14.222673+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-01T21:25:09.976823",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 79,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-01",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1208,
    "class_id": 79,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group A",
    "course_name": "BAC - Analyse Litt\u00e9raire",
    "course_type": "session",
    "attendance_date": "2025-10-01",
    "class_schedule": {
      "start_time": "19:00",
      "end_time": "23:00",
      "day": "Monday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "update",
    "existing_record": {
      "old_status": "present",
      "old_marked_by": 2,
      "old_payment_status": "unpaid",
      "original_date": "2025-10-01",
      "original_marked_at": "2025-10-01T19:59:08"
    },
    "changes": {
      "status_changed": false,
      "marker_changed": false
    },
    "enrollment": {
      "exists": true,
      "payment_type": "monthly",
      "current_sessions": 1,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 1500.0,
      "session_update": {
        "count_unchanged": 1,
        "status": "present",
        "reason": "no_increment_needed"
      },
      "cycle_info": {
        "cycle_complete": false,
        "payment_due": false,
        "payment_required": false,
        "sessions_in_cycle": 1,
        "note": "Monthly payment only required after 4 sessions (cycle complete)"
      }
    },
    "database_commit_time": "2025-10-01T21:25:10.540587",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present.",
      "type": "attendance"
    },
    "end_time": "2025-10-01T21:25:13.062398",
    "duration_seconds": 3.085575,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance updated successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 79,
        "status": "present",
        "date": "2025-10-01",
        "marked_by": 2,
        "marked_at": "2025-10-01T21:25:11.836799"
      },
      "payment_info": {
        "payment_type": "monthly",
        "total_debt": 0,
        "debt_sessions": 0,
        "monthly_sessions_attended": 1,
        "monthly_payment_status": "pending",
        "payment_required": false,
        "payment_due": false,
        "cycle_complete": false
      },
      "monthly_progress": 1,
      "payment_due": false,
      "cycle_complete": false,
      "monthly_sessions_attended": 1
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-02T02:30:15.704597+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-02T02:30:09.100427",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-10-02",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-10-02",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-02T02:30:09.536263",
      "attendance_date": "2025-10-02"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 400.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-10-02T02:30:09.712541",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-10-02T02:30:14.371791",
    "duration_seconds": 5.271364,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-10-02",
        "marked_by": 2,
        "marked_at": "2025-10-02T02:30:13.309201"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 400.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-02T02:30:15.708598+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-02T02:30:09.100427",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-10-02",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-10-02",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-02T02:30:09.536263",
      "attendance_date": "2025-10-02"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 400.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-10-02T02:30:09.712541",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-10-02T02:30:14.371791",
    "duration_seconds": 5.271364,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-10-02",
        "marked_by": 2,
        "marked_at": "2025-10-02T02:30:13.309201"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 400.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-02T03:34:48.266493+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-02T03:34:43.202019",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-10-02",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-10-02",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-02T03:34:43.700886",
      "attendance_date": "2025-10-02"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 400.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-10-02T03:34:43.890559",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-10-02T03:34:46.990723",
    "duration_seconds": 3.788704,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-10-02",
        "marked_by": 2,
        "marked_at": "2025-10-02T03:34:45.901608"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 400.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-02T03:34:48.275496+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-02T03:34:43.202019",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-10-02",
      "add_as_absent": false,
      "force": true
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-10-02",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-02T03:34:43.700886",
      "attendance_date": "2025-10-02"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 400.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-10-02T03:34:43.890559",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-10-02T03:34:46.990723",
    "duration_seconds": 3.788704,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-10-02",
        "marked_by": 2,
        "marked_at": "2025-10-02T03:34:45.901608"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 400.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-02T12:34:07.729256+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-02T12:32:29.412074",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 79,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-02",
      "add_as_absent": false,
      "force": false,
      "payment_status": "unpaid"
    },
    "student_id": 1208,
    "class_id": 79,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group A",
    "course_name": "BAC - Analyse Litt\u00e9raire",
    "course_type": "session",
    "attendance_date": "2025-10-02",
    "class_schedule": {
      "start_time": "00:00",
      "end_time": "23:00",
      "day": "Thursday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "12:32",
      "check_performed_at": "2025-10-02T12:32:36.118315"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-02T12:32:38.568098",
      "attendance_date": "2025-10-02"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "paid",
      "total_debt": 0,
      "course_price": 1500.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 1500.0,
      "total_debt": 1500.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-10-02T12:32:43.996146",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-10-02T12:34:07.493212",
    "duration_seconds": 98.081138,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 79,
        "status": "present",
        "date": "2025-10-02",
        "marked_by": 2,
        "marked_at": "2025-10-02T12:33:18.013719"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 1500.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 1500.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_error": "(pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (\"defaultdb\".\"notifications\", CONSTRAINT \"notifications_ibfk_1\" FOREIGN KEY (\"user_id\") REFERENCES \"users\" (\"id\"))')\n[SQL: INSERT INTO notifications (user_id, title_en, title_ar, message_en, message_ar, title, message, type, is_read, created_at) VALUES (%(user_id)s, %(title_en)s, %(title_ar)s, %(message_en)s, %(message_ar)s, %(title)s, %(message)s, %(type)s, %(is_read)s, %(created_at)s)]\n[parameters: {'user_id': 1209, 'title_en': None, 'title_ar': None, 'message_en': None, 'message_ar': None, 'title': 'Attendance Marked', 'message': 'Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present. Payment status: unpaid.', 'type': 'attendance', 'is_read': 0, 'created_at': datetime.datetime(2025, 10, 2, 11, 34, 7, 496214)}]\n(Background on this error at: https://sqlalche.me/e/14/gkpj)"
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-02T12:34:07.735260+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-02T12:32:29.412074",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1208,
      "class_id": 79,
      "status": "present",
      "course_type": "monthly",
      "date": "2025-10-02",
      "add_as_absent": false,
      "force": false,
      "payment_status": "unpaid"
    },
    "student_id": 1208,
    "class_id": 79,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": false,
    "student_name": "Sofiane Bouzid",
    "class_name": "Group A",
    "course_name": "BAC - Analyse Litt\u00e9raire",
    "course_type": "session",
    "attendance_date": "2025-10-02",
    "class_schedule": {
      "start_time": "00:00",
      "end_time": "23:00",
      "day": "Thursday"
    },
    "time_check": {
      "is_allowed": true,
      "message": "Within allowed time window",
      "warning_needed": false,
      "current_time": "12:32",
      "check_performed_at": "2025-10-02T12:32:36.118315"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-02T12:32:38.568098",
      "attendance_date": "2025-10-02"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "paid",
      "total_debt": 0,
      "course_price": 1500.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 1500.0,
      "total_debt": 1500.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-10-02T12:32:43.996146",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-10-02T12:34:07.493212",
    "duration_seconds": 98.081138,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1208,
        "class_id": 79,
        "status": "present",
        "date": "2025-10-02",
        "marked_by": 2,
        "marked_at": "2025-10-02T12:33:18.013719"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 1500.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 1500.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_error": "(pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (\"defaultdb\".\"notifications\", CONSTRAINT \"notifications_ibfk_1\" FOREIGN KEY (\"user_id\") REFERENCES \"users\" (\"id\"))')\n[SQL: INSERT INTO notifications (user_id, title_en, title_ar, message_en, message_ar, title, message, type, is_read, created_at) VALUES (%(user_id)s, %(title_en)s, %(title_ar)s, %(message_en)s, %(message_ar)s, %(title)s, %(message)s, %(type)s, %(is_read)s, %(created_at)s)]\n[parameters: {'user_id': 1209, 'title_en': None, 'title_ar': None, 'message_en': None, 'message_ar': None, 'title': 'Attendance Marked', 'message': 'Your attendance for BAC - Analyse Litt\u00e9raire has been marked as present. Payment status: unpaid.', 'type': 'attendance', 'is_read': 0, 'created_at': datetime.datetime(2025, 10, 2, 11, 34, 7, 496214)}]\n(Background on this error at: https://sqlalche.me/e/14/gkpj)"
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-02T12:34:39.318981+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-02T12:34:34.043886",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-10-02",
      "add_as_absent": false,
      "force": true,
      "payment_status": "unpaid"
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-10-02",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-02T12:34:34.509161",
      "attendance_date": "2025-10-02"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 400.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-10-02T12:34:34.693438",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-10-02T12:34:37.846666",
    "duration_seconds": 3.80278,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-10-02",
        "marked_by": 2,
        "marked_at": "2025-10-02T12:34:36.616420"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 400.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
[ATTENDANCE_LOG] MARK_ATTENDANCE_SUCCESS: {
  "timestamp": "2025-10-02T12:34:39.323129+01:00",
  "operation_type": "MARK_ATTENDANCE_SUCCESS",
  "user_id": 2,
  "success": true,
  "details": {
    "operation": "mark_attendance",
    "start_time": "2025-10-02T12:34:34.043886",
    "admin_user_id": 2,
    "admin_username": "ghalmiahmednoureddine@gmail.com",
    "request_data": {
      "student_id": 1,
      "class_id": 14,
      "status": "present",
      "course_type": "session",
      "date": "2025-10-02",
      "add_as_absent": false,
      "force": true,
      "payment_status": "unpaid"
    },
    "student_id": 1,
    "class_id": 14,
    "status": "present",
    "add_as_absent": false,
    "force_attendance": true,
    "student_name": "AHMED GHALMI",
    "class_name": "Group1",
    "course_name": "\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629",
    "course_type": "session",
    "attendance_date": "2025-10-02",
    "class_schedule": {
      "start_time": "11:00",
      "end_time": "13:00",
      "day": "Saturday"
    },
    "time_check": {
      "forced": true,
      "admin_override": true,
      "message": "Time restrictions bypassed by admin"
    },
    "operation_type": "create",
    "new_record": {
      "created_at": "2025-10-02T12:34:34.509161",
      "attendance_date": "2025-10-02"
    },
    "enrollment": {
      "exists": true,
      "payment_type": "session",
      "current_sessions": 0,
      "payment_status": "pending",
      "total_debt": 0,
      "course_price": 400.0
    },
    "payment_tracking": {
      "payment_type": "session",
      "payment_status": "unpaid",
      "debt_added": 400.0,
      "total_debt": 400.0,
      "note": "Debt immediately added for unpaid session attendance"
    },
    "database_commit_time": "2025-10-02T12:34:34.693438",
    "push_notification": {
      "sent": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "database_notification": {
      "created": true,
      "title": "Attendance Marked",
      "message": "Your attendance for \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062b\u0627\u0644\u062b\u0629 \u0627\u0628\u062a\u062f\u0627\u0626\u064a - \u0627\u0646\u062c\u0644\u064a\u0632\u064a\u0629 has been marked as present. Payment status: unpaid.",
      "type": "attendance"
    },
    "end_time": "2025-10-02T12:34:37.846666",
    "duration_seconds": 3.80278,
    "notifications_sent": [
      {
        "type": "attendance_notification",
        "success": true,
        "result": true
      }
    ],
    "response_data": {
      "message": "Attendance marked successfully",
      "attendance": {
        "student_id": 1,
        "class_id": 14,
        "status": "present",
        "date": "2025-10-02",
        "marked_by": 2,
        "marked_at": "2025-10-02T12:34:36.616420"
      },
      "payment_info": {
        "payment_type": "session",
        "total_debt": 400.0,
        "debt_sessions": 1,
        "payment_status": "unpaid",
        "session_price": 400.0,
        "note": "Payment can be marked as paid or not paid separately"
      },
      "payment_required": false
    },
    "final_status": "SUCCESS",
    "notification_sent": true
  }
}
